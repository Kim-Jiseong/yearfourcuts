(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[357],{3105:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/upload/page3",function(){return t(9416)}])},7232:function(n,e,t){"use strict";t.d(e,{$1:function(){return s},CJ:function(){return c},Ht:function(){return f},Nn:function(){return d},WQ:function(){return a},cg:function(){return u},hP:function(){return g},nY:function(){return m},u9:function(){return l},vf:function(){return p}});var r=t(4480),o=t(6983);let{persistAtom:i}=(0,o.J)(),c=(0,r.cn)({key:"frame",default:null}),u=(0,r.cn)({key:"color",default:"#FFD275"}),f=(0,r.cn)({key:"file1",default:""}),l=(0,r.cn)({key:"file2",default:""}),a=(0,r.cn)({key:"file3",default:""}),s=(0,r.cn)({key:"file4",default:""}),d=(0,r.cn)({key:"letterAtom",default:""}),p=(0,r.cn)({key:"authorAtom",default:""}),m=(0,r.cn)({key:"pageAtom",default:1}),g=(0,r.cn)({key:"modalAtom",default:!1})},9416:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return a}});var r=t(5893),o=t(7294),i=t(5314),c=t(1163),u=t(594),f=t(4480),l=t(7232);function a(n){let e=(0,c.useRouter)(),t=e.query.pid,a=(0,o.useRef)(),[s,d]=(0,f.FV)(l.cg),[p,m]=(0,f.FV)(l.CJ),[g,h]=(0,f.FV)(l.vf),[w,y]=(0,f.FV)(l.Nn),[b,x]=(0,f.FV)(l.Ht),[k,v]=(0,f.FV)(l.u9),[Z,C]=(0,f.FV)(l.WQ),[I,P]=(0,f.FV)(l.$1),[F,j]=(0,f.FV)(l.nY);console.log("frame",p);let S=n=>{h(n.target.value),console.log(g)},_=n=>{y(n.target.value),console.log(w),a.current.style.height="auto",a.current.style.height=a.current.scrollHeight+"px"},z=(n,e)=>{let t=atob(n.split(",")[1]),r=new ArrayBuffer(t.length),o=new Uint8Array(r);for(let i=0;i<t.length;i+=1)o[i]=t.charCodeAt(i);let c=new Blob([o],{type:"image/jpeg"}),u=new File([c],"image".concat(e,".jpg"));return console.log("image".concat(e," 변환됨")),u},N=async()=>{console.log("전송시작");let n=new FormData;[b,k,Z,I].forEach((e,t,r)=>{let o=z(e,t);n.append("image",o)}),console.log("image 모두 변환됨"),n.append("title",g),n.append("letter",w),n.append("color",s),n.append("frame",p),n.append("public_id",t),await (0,u.Z)({method:"post",url:"http://ec2-13-125-79-217.ap-northeast-2.compute.amazonaws.com/api/posts/newPost",data:n,headers:{"Content-Type":"multipart/form-data"}}).then(function(n){console.log(n),x(""),v(""),C(""),P(""),h(""),y(""),m(""),d("#FFD275"),j(1),e.push("/"+t)}).catch(function(n){console.log(n),alert("에러가 발생했습니다")})};return(0,r.jsxs)(i.W2,{children:[(0,r.jsxs)(i.LZ,{children:[(0,r.jsx)("div",{children:"Step 3"}),(0,r.jsx)("div",{children:"메시지를 남겨주세요"})]}),(0,r.jsx)(i.DK,{children:"작성"}),(0,r.jsx)(i.S3,{onChange:S,maxLength:8,placeholder:"8글자 이하로 적어주세요"}),(0,r.jsx)(i.DK,{children:"메시지"}),(0,r.jsx)(i.kr,{rows:1,ref:a,onChange:_}),(0,r.jsx)(i.un,{onClick:()=>{p&&s&&b&&k&&Z&&I&&w&&g&&N()},children:"사진 올리기"})]})}},5314:function(n,e,t){"use strict";t.d(e,{DI:function(){return x},DK:function(){return b},LI:function(){return v},LZ:function(){return y},Qk:function(){return k},S3:function(){return I},W2:function(){return w},Wp:function(){return C},g6:function(){return Z},kr:function(){return P},un:function(){return F}});var r=t(7297),o=t(9521);function i(){let n=(0,r.Z)(["\n  width: 80%;\n  min-height: 100vh;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  /* align-items: center; */\n"]);return i=function(){return n},n}function c(){let n=(0,r.Z)(['\n  margin-top: 10rem;\n  margin-bottom: 3rem;\n  font-family: "SlowSlow";\n  display: flex;\n  flex-direction: column;\n  font-size: 2.4rem;\n  align-items: center;\n  &:last-child {\n    font-size: 3rem;\n  }\n']);return c=function(){return n},n}function u(){let n=(0,r.Z)(["\n  font-size: 1.8rem;\n  /* font-weight: 700; */\n  margin: 2rem 0 2rem 0;\n"]);return u=function(){return n},n}function f(){let n=(0,r.Z)(["\n  width: 100%;\n  overflow-x: scroll;\n  /* display: flex; */\n  white-space: nowrap;\n"]);return f=function(){return n},n}function l(){let n=(0,r.Z)(["\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: flex-start;\n"]);return l=function(){return n},n}function a(){let n=(0,r.Z)(["\n  position: relative;\n  /* padding: 1rem; */\n  margin-bottom: 2rem;\n  flex-grow: 0;\n  cursor: pointer;\n"]);return a=function(){return n},n}function s(){let n=(0,r.Z)(["\n  width: 6rem;\n  height: 6rem;\n  border-radius: 500px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  /* background-color: red; */\n  border: 3px solid #fff9e7;\n  background: "," no-repeat center;\n  background-size: cover;\n  box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.25);\n"]);return s=function(){return n},n}function d(){let n=(0,r.Z)(["\n      visibility: visible;\n    "]);return d=function(){return n},n}function p(){let n=(0,r.Z)(["\n  width: 6.8rem;\n  height: 6.8rem;\n  background: "," no-repeat center;\n  background-size: cover;\n  position: relative;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  border-radius: 500px;\n  visibility: hidden;\n  ","\n"]);return p=function(){return n},n}function m(){let n=(0,r.Z)(['\n  width: 100%;\n  background: none;\n  font-family: "SlowSlow";\n  border: none;\n  border-bottom: 1px solid black;\n  resize: none;\n  font-size: 2.4rem;\n  padding: 1rem;\n  padding-top: 0;\n']);return m=function(){return n},n}function g(){let n=(0,r.Z)(['\n  width: 100%;\n  background: none;\n  font-family: "SlowSlow";\n  border: 1px solid black;\n  resize: none;\n  font-size: 2.4rem;\n  padding: 1rem;\n']);return g=function(){return n},n}function h(){let n=(0,r.Z)(["\n  width: 100%;\n  height: 6rem;\n  background: white;\n  box-shadow: 0px 3px 6px #00000029;\n  border: 2px solid #1d1b1c;\n  border-radius: 12px;\n  margin-top: 4rem;\n  margin-bottom: 1rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #1d1b1c;\n  font-size: 1.8rem;\n  /* font-weight: 700; */\n"]);return h=function(){return n},n}let w=o.ZP.div.withConfig({componentId:"sc-242f9fc3-0"})(i()),y=o.ZP.div.withConfig({componentId:"sc-242f9fc3-1"})(c()),b=o.ZP.div.withConfig({componentId:"sc-242f9fc3-2"})(u()),x=o.ZP.div.withConfig({componentId:"sc-242f9fc3-3"})(f()),k=o.ZP.div.withConfig({componentId:"sc-242f9fc3-4"})(l()),v=o.ZP.div.withConfig({componentId:"sc-242f9fc3-5"})(a()),Z=o.ZP.div.withConfig({componentId:"sc-242f9fc3-6"})(s(),n=>n.color||"black"),C=o.ZP.div.withConfig({componentId:"sc-242f9fc3-7"})(p(),n=>n.color||"black",n=>n.title===n.color&&(0,o.iv)(d())),I=o.ZP.input.withConfig({componentId:"sc-242f9fc3-8"})(m()),P=o.ZP.textarea.withConfig({componentId:"sc-242f9fc3-9"})(g()),F=o.ZP.div.withConfig({componentId:"sc-242f9fc3-10"})(h())},6983:function(n,e){"use strict";e.J=void 0;let t=(n={})=>{if("undefined"==typeof window)return{persistAtom:()=>{}};let{key:e="recoil-persist",storage:t=localStorage}=n,r=({onSet:n,node:e,trigger:t,setSelf:r})=>{if("get"===t){let c=i();"function"==typeof c.then&&c.then(n=>{n.hasOwnProperty(e.key)&&r(n[e.key])}),c.hasOwnProperty(e.key)&&r(c[e.key])}n(async(n,t,r)=>{let c=i();"function"==typeof c.then?c.then(t=>o(n,t,e.key,r)):o(n,c,e.key,r)})},o=(n,e,t,r)=>{r?delete e[t]:e[t]=n,u(e)},i=()=>{let n=t.getItem(e);return null==n?{}:"string"==typeof n?c(n):"function"==typeof n.then?n.then(c):{}},c=n=>{if(void 0===n)return{};try{return JSON.parse(n)}catch(e){return console.error(e),{}}},u=n=>{try{"function"==typeof t.mergeItem?t.mergeItem(e,JSON.stringify(n)):t.setItem(e,JSON.stringify(n))}catch(r){console.error(r)}};return{persistAtom:r}};e.J=t}},function(n){n.O(0,[876,934,774,888,179],function(){return n(n.s=3105)}),_N_E=n.O()}]);